<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>CYBER!</title>

        <!-- Bootstrap -->
        <style>
            @import "{{ url_for('static', filename='css/bootstrap.min.css') }}";
            @import "{{ url_for('static', filename='css/bootstrap-slider.min.css') }}";
            @import "{{ url_for('static', filename='css/selectize.css') }}";
            @import "{{ url_for('static', filename='css/selectize.bootstrap3.css') }}";

            #colorww1Slider .slider-selection,
            #colorww2Slider .slider-selection {
                background: #BABABA;
            }
            #colorww1Slider,
            #colorww2Slider {
                width: 100%;
            }
        </style>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="{{ url_for('static', filename='js/html5shiv.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/respond.min.js') }}"></script>
        <![endif]-->
    </head>
    <body>
        <div class="container">
            <h1>Cyber-Steuerung v0.1.0</h1>

            <div class="row">
                <div class="col-lg-6">
                    <form class="form-horizontal">
                        <fieldset>
                            <legend>Anzeige links</legend>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="line1">Linie</label>
                                <div class="col-md-6">
                                    <select id="line1" name="line1" class="form-control">
                                        <option value="1">S7</option>
                                    </select><!-- #line1 /.form-control -->
                                </div><!-- /.col-md-4 -->
                                <div class="col-md-2">
                                    <button id="line1rand" name="line1rand" class="btn btn-default">Zufällig</button>
                                </div><!-- /.col-md-2 -->
                            </div><!-- /.form-group -->

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="target1">Ziel</label>
                                <div class="col-md-6">
                                    <select id="target1" name="target1" class="form-control">
                                        <option value="1">Potsdam Hbf</option>
                                    </select><!-- #selectbasic /.form-control -->
                                </div><!-- /.col-md-4 -->
                                <div class="col-md-2">
                                    <button id="target1rand" name="target1rand" class="btn btn-default">Zufällig</button>
                                </div><!-- /.col-md-2 -->
                            </div><!-- /.form-group -->

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="desc1">Beschreibung</label>
                                <div class="col-md-6">
                                    <select id="desc1" name="desc1" class="form-control">
                                        <option value="1">über Zoologischer Garten, Westkreuz</option>
                                    </select><!-- #selectbasic /.form-control -->
                                </div><!-- /.col-md-4 -->
                                <div class="col-md-2">
                                    <button id="desc1rand" name="desc1rand" class="btn btn-default">Zufällig</button>
                                </div><!-- /.col-md-2 -->
                            </div><!-- /.form-group -->

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="colorrgb1">Beleuchtung</label>
                                <div class="col-md-3">
                                    <input type="color" id="colorrgb1" class="form-control" value="#88cde8" />
                                </div>
                                <div class="col-md-3">
                                    <input id="colorww1" data-slider-id='colorww1Slider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50" />
                                </div>
                                <div class="col-md-3 col-md-offset-4">
                                    <p><small>RGB</small></p>
                                </div>
                                <div class="col-md-3">
                                    <p><small>WW</small></p>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="sign1actions"></label>
                                <div class="col-md-8">
                                    <button id="sign1go" name="sign1actions" class="btn btn-primary">Anwenden</button>
                                    <button id="sign1reset" name="sign1actions" class="btn btn-danger">Reset</button>
                                </div><!-- /.col-md-4 -->
                            </div><!-- /.form-group -->
                        </fieldset>
                    </form><!-- /.form-horizontal -->
                </div><!-- /.col-lg-6 -->
                <div class="col-lg-6">
                    <form class="form-horizontal">
                        <fieldset>
                            <legend>Anzeige rechts</legend>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="line2">Linie</label>
                                <div class="col-md-6">
                                    <select id="line2" name="line2" class="form-control">
                                        <option value="1">S7</option>
                                    </select><!-- #line2 /.form-control -->
                                </div><!-- /.col-md-4 -->
                                <div class="col-md-2">
                                    <button id="line2rand" name="line2rand" class="btn btn-default">Zufällig</button>
                                </div><!-- /.col-md-2 -->
                            </div><!-- /.form-group -->

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="target2">Ziel</label>
                                <div class="col-md-6">
                                    <select id="target2" name="target2" class="form-control">
                                        <option value="1">Potsdam Hbf</option>
                                    </select><!-- #selectbasic /.form-control -->
                                </div><!-- /.col-md-4 -->
                                <div class="col-md-2">
                                    <button id="target2rand" name="target2rand" class="btn btn-default">Zufällig</button>
                                </div><!-- /.col-md-2 -->
                            </div><!-- /.form-group -->

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="desc2">Beschreibung</label>
                                <div class="col-md-6">
                                    <select id="desc2" name="desc2" class="form-control">
                                        <option value="1">über Zoologischer Garten, Westkreuz</option>
                                    </select><!-- #selectbasic /.form-control -->
                                </div><!-- /.col-md-4 -->
                                <div class="col-md-2">
                                    <button id="desc2rand" name="desc2rand" class="btn btn-default">Zufällig</button>
                                </div><!-- /.col-md-2 -->
                            </div><!-- /.form-group -->

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="colorrgb2">Beleuchtung</label>
                                <div class="col-md-3">
                                    <input type="color" id="colorrgb2" class="form-control" value="#88cde8" />
                                </div>
                                <div class="col-md-3">
                                    <input id="colorww2" data-slider-id='colorww2Slider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50" />
                                </div>
                                <div class="col-md-3 col-md-offset-4">
                                    <p><small>RGB</small></p>
                                </div>
                                <div class="col-md-3">
                                    <p><small>WW</small></p>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label" for="sign2actions"></label>
                                <div class="col-md-8">
                                    <button id="sign2go" name="sign2actions" class="btn btn-primary">Anwenden</button>
                                    <button id="sign2reset" name="sign2actions" class="btn btn-danger">Reset</button>
                                </div><!-- /.col-md-4 -->
                            </div><!-- /.form-group -->
                        </fieldset>
                    </form><!-- /.form-horizontal -->
                </div><!-- /.col-lg-6 -->
            </div><!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <form id="homing" class="form-horizontal">
                        <fieldset>
                            <legend>Wartung</legend>

                            <div id="maintenance" class="form-group">
                                <label class="col-md-4 control-label" for="homeall">Homing</label>
                                <div class="col-md-4">
                                    <select id="homesingleselect" name="homesingleselect" class="form-control">
                                        <option value="1">Anzeige 1, Linie</option>
                                    </select><!-- #selectbasic /.form-control -->
                                </div><!-- /.col-md-4 -->
                                <div class="col-md-2">
                                    <button id="homeone" name="homeone" type="submit" class="btn btn-default">Home</button>
                                    <button id="homeall" name="homeall" type="button" class="btn btn-primary">Home alle</button>
                                </div><!-- /.col-md-4 -->
                            </div><!-- /.form-group -->
                        </fieldset>
                    </form><!-- /.form-horizontal -->
                </div><!-- /.col-lg-12 -->
            </div><!-- /.row -->
        </div><!-- /.container -->

    <script src="{{ url_for('static', filename='js/jquery-2.2.4.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery-migrate-1.3.0.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap-slider.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/socket.io-1.4.6.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/selectize.min.js') }}"></script>

    <script>
        Object.prototype.in = function() {
            for(var i = 0; i < arguments.length; i++) {
                if(arguments[i] == this) {
                    return true;
                }
            }
            return false;
        };

        $(function() {
            $('#colorww1').slider({
                formatter: function(value) {
                    return value + '%';
                }
            });
            $('#colorww2').slider({
                formatter: function(value) {
                    return value + '%';
                }
            });

            $('#line1').selectize({
                create: false,
                sortField: 'text'
            });
            $('#line2').selectize({
                create: false,
                sortField: 'text'
            });
            $('#target1').selectize({
                create: false,
                sortField: 'text'
            });
            $('#target2').selectize({
                create: false,
                sortField: 'text'
            });
            $('#desc1').selectize({
                create: false,
                sortField: 'text'
            });
            $('#desc2').selectize({
                create: false,
                sortField: 'text'
            });


            var socket = io.connect('http://' + document.domain + ':' + location.port);

            socket.on('connect', function() {
                console.log('connection established!');
                socket.emit('connected');
            });

            socket.on('update', function (json) {
                console.log('got update: ' + json);
                // TODO: update content of all controls
            });

            $('#homing').submit(function(event) {
                id = $('#homesingleselect').val();
                if(id.in(0,1,2,3,4,5)) {
                    console.log('homing leave ' + id);
                    socket.emit('home', id);
                }
                event.preventDefault();
            });

            $('#homeall').click(function() {
                console.log('homing all leaves');
                socket.emit('home', 'all');
            });

            /*
            // handlers for the different forms in the page
            // these send data to the server in a variety of ways
            $('form#broadcast').submit(function(event) {
                socket.emit('broadcast', {data: $('#broadcast_data').val()});
                return false;
            });
            $('form#home').submit(function(event) {
                socket.emit('home', {data: {leave_id: $('#leave_id').val()}});
                return false;
            });
            $('form#disconnect').submit(function(event) {
                socket.emit('disconnect');
                return false;
            });
            $('form#connect').submit(function(event) {
                connect();
                return false;
            });
            */
        });
    </script>
</body>
</html>
